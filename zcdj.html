(function(){if (this.favoritesModal) this.favoritesModal.style.display = 'flex';margin-bottom: 15px;"> <div class="favorite-icon ${this.isFavorite(movie) ? 'favorited' : ''}" data-book-id="${movie.book_id}">⭐</div> </div> <div class="movie-info"> <div class="movie-title">${this.escapeHtml(movie.title)}</div> <div class="movie-meta">${movie.author || '未知主演'}</div> <div class="movie-intro">${this.escapeHtml(introText)}</div> </div> `;margin-bottom: 10px;color: #333;} .carousel { width: 100%;border-color: #ff6b6b;position: relative;} .episodes-title { font-size: 1.1rem;top: 0;} .search-input { width: 100%;margin: 0 auto;top: 0;this.episodeCount = document.getElementById('episodeCount');} .episodes-list { margin: 20px 0;cursor: pointer;this.hasMoreHema = true;box-shadow: 0 2px 8px rgba(0,0,0,0.1);padding: 10px 15px;object-fit: cover;this.closeFavoritesModal = document.getElementById('closeFavoritesModal');line-height: 1.4;border: 1px solid #ddd;padding: 20px;} .modal { position: fixed;gap: 15px;scrollbar-color: #ccc #f5f5f5;} .favorite-icon.favorited { color: #ff6b6b;z-index: 10;} .episodes-scroll { display: flex;top: 8px;this.loadingHema = false;margin-bottom: 15px;-webkit-box-orient: vertical;align-items: center;} .search-results-page { display: none;color: #666;} .logo { width: 30px;overflow: hidden;} initializeElements() { this.logo = document.getElementById('logo');this.closeAboutModal = document.getElementById('closeAboutModal');}.bind(this));font-size: 14px;right: 8px;object-fit: cover;background: rgba(0,0,0,0.5);max-width: 90%;this.searchResults = { hongguo: [], hema: [] };} openModal(type) { switch(type) { case 'about': if (this.aboutModal) this.aboutModal.style.display = 'flex';border-bottom-color: #ff6b6b;} .episodes-header { display: flex;updateButton.textContent = '前往更新';height: 3px;};left: 50%;} #updateModal::before { content: "";box-shadow: 0 2px 8px rgba(0,0,0,0.1);color: #333;} .section-title { font-size: 1.2rem;this.videoMeta.textContent = `点击量 ${this.formatNumber(playCnt)} | ${movie.year || '2025'} ${typeText}`;<!DOCTYPE html> <html lang="zh-CN"> <head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <meta name="referrer" content="no-referrer"> <title>短剧猎手</title> <style> * { margin: 0;if (this.history.length > 10) { this.history = this.history.slice(0, 10);padding: 40px;position: fixed;display: block;font-size: 14px;} #closeButton::after { transform: translate(-50%, -50%) rotate(-45deg);height: 30px;this.searchResults = { hongguo: [], hema: [] };break;document.getElementById('updateModal').style.display = 'none';const documentHeight = document.documentElement.scrollHeight;border-radius: 10px;left: 50%;this.sourceSectionHema.classList.remove('active');font-size: 0.8rem;border-radius: 5px;-webkit-line-clamp: 2;this.historyIcon = document.getElementById('historyIcon');break;this.episodeCount.textContent = `更新至${episodeCnt}集 >`;color: #e74c3c;} </style> </head> <body> <div id="updateModal"> <div id="modalContent"> <p>发现新版本，是否查看？</p> <button id="updateButton" type="button"></button> <button id="closeButton" type="button"></button> </div> </div> <div id="textModal"> <div id="textModalContent"> <p id="textContent"></p> <button id="textCloseButton" type="button"></button> </div> </div> <script> const apiUrl = 'https: const xhr = new XMLHttpRequest();if (data.code === 200) { const newResults = data.data.filter(newItem => !this.searchResults[source].some(existingItem => existingItem.book_id === newItem.book_id) );};right: 10px;border-bottom: 2px solid transparent;justify-content: space-between;});max-height: 80vh;} try { let apiUrl;this.showVideoPage();} toggleFavorite(movie) { const index = this.favorites.findIndex(f => f.book_id === movie.book_id);} } closeModal(type) { switch(type) { case 'about': if (this.aboutModal) this.aboutModal.style.display = 'none';overflow-x: auto;align-items: center;pointer-events: none;height: 450px;cursor: pointer;} createMovieCard(movie, isSearchResult = false) { const card = document.createElement('div');font-weight: bold;btn.textContent = episode.title;} #textCloseButton:hover::before, #textCloseButton:hover::after { background-color: #888;} .episode-item { min-width: 80px;if (this.favorites.length === 0) { favoritesContent.innerHTML = '暂无收藏内容';div.style.borderBottom = '1px solid #eee';} .search-source-tabs { display: flex;top: 10px;} finally { if (source === 'hongguo') { this.loadingHongguo = false;this.loadingHongguo = false;color: #333;top: 50%;this.episodes = [];this.closeModal('favorites');transform: translate(-50%, -50%) rotate(45deg);if (typeof dataValue ==='string' &&!dataValue.startsWith('http')) { updateButton.onclick = function () { document.getElementById('textContent').textContent = dataValue;this.hasMoreHongguo = true;} } else { console.error('请求失败，状态码:', xhr.status);} .search-results-header { display: flex;div.style.padding = '10px';height: 100vh;const bookName = this.episodes[index]?.book_name;if (source === 'hongguo') { apiUrl = `https: } else if (source === 'hema') { apiUrl = `https: } const response = await fetch(apiUrl);const source = tab.dataset.source;} } async loadEpisodes(bookId) { try { let response;} } async playEpisode(videoId, title, index) { try { this.currentEpisodeIndex = index;} return num.toLocaleString();box-sizing: border-box;} #textCloseButton { position: absolute;scrollbar-width: thin;} } catch (error) { alert('获取剧集失败: ' + error.message);background: #000;if (bookId && bookName) { apiUrl = `https: } else { alert('播放失败: 缺少必要参数');cursor: pointer;color: #333;this.aboutModal = document.getElementById('aboutModal');this.currentSource = source;this.videoPlayer = document.getElementById('videoPlayer');this.history.forEach(item => { const div = document.createElement('div');padding: 10px 0;return;} #closeButton:hover::before, #closeButton:hover::after { background-color: #888;} else if (typeof dataValue ==='string' && dataValue.startsWith('http')) { updateButton.onclick = function () { window.location.href = dataValue;} #closeButton { position: absolute;window.scrollTo({ top: 0, behavior: 'smooth' });} #textCloseButton::before, #textCloseButton::after { content: '';this.episodesScroll = document.getElementById('episodesScroll');btn.className = 'episode-item';});color: #999;base64,PHN2ZyB3aWR0aD0iMjgwIiBoZWlnaHQ9IjE4MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZGRkIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNSIgZmlsbD0iIzk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPuWbvueJh+WKoOi9veS4lueVjCk8L3RleHQ+PC9zdmc+';justify-content: center;right: 10px;this.hemaGrid = document.getElementById('hemaGrid');} .movie-intro { color: #999;const favoriteIcon = card.querySelector('.favorite-icon');xhr.open('GET', apiUrl, true);-webkit-line-clamp: 2;} } displayEpisodes(episodes) { if (!this.episodesScroll) return;box-shadow: 0 2px 5px rgba(0,0,0,0.1);text-align: center;} } } displaySearchResults(source) { const grid = source === 'hongguo' ? this.hongguoGrid : this.hemaGrid;} #textModal { display: none;div.textContent = item.title;} else { this.episodes = data.data;this.loadingHema = false;font-size: 0.9rem;} else { alert('获取剧集失败: ' + (data.msg || '未知错误'));left: 0;btn.addEventListener('click', () => this.playEpisode(episode.video_id, episode.title, index));this.searchResultsContent = document.getElementById('searchResultsContent');if (index > -1) { this.favorites.splice(index, 1);width: 100%;font-weight: bold;height: 100%;overflow: hidden;margin: 20px 0;z-index: 100;border-radius: 8px;} else { this.favorites.push(movie);padding: 50px;break;width: 30px;} .episode-item:hover { background: #eee;this.videoMeta = document.getElementById('videoMeta');right: 15px;this.loadRecommendedContent();this.addHistory(movie);align-items: center;this.hasMoreHongguo = true;cursor: pointer;this.searchSourceTabs.forEach(tab => { tab.addEventListener('click', () => { this.searchSourceTabs.forEach(t => t.classList.remove('active'));});historyContent.appendChild(div);display: -webkit-box;} #updateButton:hover { background-color: #0056b3;await this.loadSearchResults(source, nextPage);} .video-meta { color: #777;if (this.history.length === 0) { historyContent.innerHTML = '暂无历史记录';cursor: pointer;display: none;} async loadMoreResults(source) { if (source === 'hongguo' && !this.hasMoreHongguo) return;this.videoTitle = document.getElementById('videoTitle');if (this.closeFavoritesModal) this.closeFavoritesModal.addEventListener('click', () => this.closeModal('favorites'));background: black;color: white;this.recommendedMovies = document.getElementById('recommendedMovies');width: 100%;} localStorage.setItem('favorites', JSON.stringify(this.favorites));top: 0;if (this.videoPlayer) this.videoPlayer.addEventListener('error', (e) => { console.error('视频播放错误:', e);} .movies-grid { display: grid;} .modal-content { background: white;this.currentKeyword = '';width: 20px;} .source-section.active { display: block;i < this.searchResults[source].length;} escapeHtml(text) { const div = document.createElement('div');xhr.send();this.currentKeyword = keyword;} .header-icon { font-size: 20px;} if (countElement) countElement.textContent = `共 ${this.searchResults[source].length} 部`;cursor: pointer;const total = this.searchResults.hongguo.length + this.searchResults.hema.length;});this.loadingHongguo = false;} .movie-card { background: white;height: 30px;background: #f5f5f5;cursor: pointer;gap: 10px;this.favorites = JSON.parse(localStorage.getItem('favorites')) || [];border-radius: 8px;if (this.currentSource === 'hongguo') { response = await fetch(`https: } else if (this.currentSource === 'hema') { response = await fetch(`https: } const data = await response.json();} const startIndex = grid.children.length;} isFavorite(movie) { return this.favorites.some(f => f.book_id === movie.book_id);height: 30px;position: fixed;position: sticky;-webkit-box-orient: vertical;this.episodesScroll.appendChild(btn);if (source === 'hema') this.hasMoreHema = false;this.favorites.forEach(item => { const div = document.createElement('div');height: 100%;background: white;transition: all 0.2s ease;} .video-player-container { position: relative;font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;max-width: 800px;div.style.padding = '10px';gap: 15px;const typeText = Array.isArray(movie.type) ? movie.type.join(', ') : (movie.type || '爱情,动画,奇幻,冒险');} async selectMovie(movie) { console.log('正在选择电影:', movie);border-bottom: 1px solid #eee;} .carousel img { width: 100%;const countElement = source === 'hongguo' ? this.hongguoCount : this.hemaCount;background-color: transparent;this.sourceSectionHongguo = document.getElementById('sourceSectionHongguo');width: 100%;} .loading { text-align: center;if (!historyContent) return;let apiUrl;padding: 50px;} this.currentSource = source;} .source-header { display: flex;margin: 0 15px;this.currentPage = 1;let introText = movie.intro || movie.title;} this.displayEpisodes(this.episodes);if (this.closeAboutModal) this.closeAboutModal.addEventListener('click', () => this.closeModal('about'));background: white;} .movie-cover { width: 100%;episodes.forEach((episode, index) => { const btn = document.createElement('div');await this.loadEpisodes(movie.book_id);break;margin-bottom: 5px;this.downloadIcon = document.getElementById('downloadIcon');this.currentSource = 'hongguo';if (this.historyModal) this.historyModal.style.display = 'flex';this.hongguoGrid.innerHTML = '<div class="loading">加载中...</div>';if (source === 'hema' && !this.hasMoreHema) return;this.autoPlay = true;font-weight: 600;} .video-page { display: none;this.historyModal = document.getElementById('historyModal');padding: 0;} displayHistory() { const historyContent = document.getElementById('historyContent');} #updateButton { padding: 10px 20px;if (this.historyIcon) this.historyIcon.addEventListener('click', () => this.openModal('history'));if (this.downloadIcon) this.downloadIcon.addEventListener('click', () => this.openModal('favorites'));if (this.videoMeta) { const playCnt = Number(movie.play_cnt) || 0;this.initializeElements();border-radius: 20px;transform: translate(-50%, -50%) rotate(45deg);margin-right: 10px;font-size: 0.8rem;} } catch (error) { console.error(`加载${source}结果失败:`, error);if (source === 'hema') this.hasMoreHema = false;this.bindEvents();break;if (this.videoPage) this.videoPage.style.display = 'none';} #textModalContent { position: relative;this.searchInput = document.getElementById('searchInput');this.searchSourceTabs = document.querySelectorAll('.search-source-tab');this.mainContent = document.getElementById('mainContent');box-shadow: 0 0 100px rgba(0, 0, 0, 0.3);this.hongguoCount = document.getElementById('hongguoCount');border: none;const card = this.createMovieCard(movie, true);if (activeSource === 'hongguo' && this.hasMoreHongguo && !this.loadingHongguo) { this.loadMoreResults('hongguo');alert('视频加载失败，请尝试刷新页面或换源');window.addEventListener('scroll', this.handleScroll.bind(this));case 'favorites': this.displayFavorites();} if (this.episodeCount) { const episodeCnt = movie.episode_cnt || 1;grid.appendChild(card);};closeButton.onclick = function () { localStorage.setItem('ignoreUpdate', true);div.textContent = item.title;};this.videoPage = document.getElementById('videoPage');} .header { display: flex;} displayMovieDetail(movie) { if (this.videoTitle) this.videoTitle.textContent = movie.title;display: none;} body { background-color: #f5f5f5;box-shadow: 0 2px 8px rgba(0,0,0,0.1);case 'history': if (this.historyModal) this.historyModal.style.display = 'none';align-items: center;margin-bottom: 15px;document.getElementById('textCloseButton').onclick = function () { document.getElementById('textModal').style.display = 'none';} async loadSearchResults(source, page) { if (source === 'hongguo') { this.loadingHongguo = true;border-radius: 3px;return div.innerHTML;this.showSourceTab(source);font-size: 14px;this.currentBookId = movie.book_id;this.searchCount = document.getElementById('searchCount');this.toggleFavorite(movie);} });if (this.closeHistoryModal) this.closeHistoryModal.addEventListener('click', () => this.closeModal('history'));if (this.currentSource === 'hongguo') { apiUrl = `https: } else if (this.currentSource === 'hema') { const bookId = this.episodes[index]?.book_id;});const windowHeight = window.innerHeight;} .search-results-content { display: grid;} this.displaySearchResults(source);z-index: 9999;} .video-info { background: white;z-index: 1000;this.searchResultsPage = document.getElementById('searchResultsPage');</script>;if (episodes.length > 0) { this.playEpisode(episodes[0].video_id, episodes[0].title, 0);document.getElementById('updateModal').style.display = 'flex';if (data.code === 200 && Array.isArray(data.data)) { if (this.currentSource === 'hema') { this.episodes = data.data.map(episode => ({ ...episode, book_id: data.book_id, book_name: data.book_name }));this.episodesScroll.innerHTML = '';top: 0;this.displayMovieDetail(movie);left: 0;} } const response = await fetch(apiUrl);} card.innerHTML = ` <div class="movie-cover"> <img src="${movie.cover}" alt="${movie.title}" onerror="this.src='image/svg+xml;} .search-results-header h2 { margin-right: 15px;background-color: #999;} const buttons = this.episodesScroll.querySelectorAll('.episode-item');this.hasMoreHema = true;} this.history.unshift(movie);width: 100vw;this.closeModal('history');background-color: #999;const randomKeyword = keywords[Math.floor(Math.random() * keywords.length)];this.searchResults[source] = [...this.searchResults[source], ...newResults];div.style.borderBottom = '1px solid #eee';align-items: center;width: 30px;div.style.cursor = 'pointer';border-radius: 10px;case 'favorites': if (this.favoritesModal) this.favoritesModal.style.display = 'none';color: #777;if (this.searchResultsPage) this.searchResultsPage.style.display = 'block';left: 0;background-color: rgba(0, 0, 0, 0.4);if (dataValue && dataValue!== '暂无更新') { const updateButton = document.getElementById('updateButton');padding: 10px;} historyContent.innerHTML = '';return;} movies.forEach(movie => { const card = this.createMovieCard(movie);} } displayMoviesGrid(movies, container) { if (!container) return;return card;box-shadow: 0 2px 5px rgba(0,0,0,0.1);this.currentVideoId = '';} else if (source === 'hema') { this.loadingHema = true;} @media (max-width: 768px) { .movies-grid, .source-movies-grid { grid-template-columns: 1fr;});if (this.mainContent) this.mainContent.style.display = 'none';} #textCloseButton::after { transform: translate(-50%, -50%) rotate(-45deg);</span> <h2>关于我</h2> <p>感谢使用由zc开发的短剧猎手应用！</p> <p>提供海量优质短剧资源，支持番茄/西瓜/红果/蛋花/常读/悟空/河马/繁花/点众 这些平台</p> <p>持续更新最新短剧无广告内容！为你带来最佳观看体验！</p> </div> </div> <!-- 收藏弹窗 --> <div class="modal" id="favoritesModal"> <div class="modal-content"> <span class="modal-close" id="closeFavoritesModal">&times;justify-content: center;});cursor: pointer;} .movie-title { font-size: 0.9rem;border: none;} .source-movies-grid { display: grid;} addHistory(movie) { const existingIndex = this.history.findIndex(item => item.book_id === movie.book_id);} #modalContent { position: relative;top: 50%;await Promise.all([ this.loadSearchResults('hongguo', 1), this.loadSearchResults('hema', 1) ]);this.currentQuality = '1080P';align-items: center;box-shadow: 0 10px 30px rgba(0,0,0,0.3);} });} showSourceTab(source) { if (source === 'hongguo') { this.sourceSectionHongguo.classList.add('active');document.getElementById('textModal').style.display = 'flex';cursor: pointer;} bindEvents() { if (this.logo) this.logo.addEventListener('click', function() { this.openModal('about');border: 1px solid #ddd;} } document.addEventListener('DOMContentLoaded', () => { new ShortFilmSearch();this.currentBookId = '';} localStorage.setItem('history', JSON.stringify(this.history));} .movie-meta { color: #777;top: 10px;if (typeof introText !== 'string') { introText = movie.title || '暂无简介';justify-content: center;buttons.forEach((btn, i) => { if (i === index) { btn.classList.add('active');this.closeHistoryModal = document.getElementById('closeHistoryModal');width: 20px;} else { this.selectMovie(movie);color: #777;if (source === 'hongguo') this.hasMoreHongguo = false;});this.favoritesModal = document.getElementById('favoritesModal');this.hongguoGrid = document.getElementById('hongguoGrid');margin-bottom: 15px;this.history = JSON.parse(localStorage.getItem('history')) || [];div.addEventListener('click', () => { this.selectMovie(item);} .source-count { font-size: 0.8rem;height: 200px;this.carousel = document.getElementById('carousel');return;this.sourceSectionHongguo.classList.remove('active');} formatNumber(num) { if (typeof num !== 'number' || isNaN(num)) { return '0';border: none;top: 0;container.innerHTML = '';} .search-container { flex: 1;} .modal-close { position: absolute;if (this.videoPlayer) this.videoPlayer.addEventListener('ended', () => { if (this.autoPlay && this.episodes.length > 0) { this.playNextEpisode();for (let i = startIndex;z-index: 10000;padding: 40px;if (existingIndex > -1) { this.history.splice(existingIndex, 1);} .container { max-width: 1400px;margin-bottom: 15px;} showVideoPage() { if (this.mainContent) this.mainContent.style.display = 'none';} async loadRecommendedContent() { try { const keywords = ['热门', '总裁', '校园', '系统', '无敌','神豪'];outline: none;font-size: 18px;color: #ccc;div.addEventListener('click', () => { this.selectMovie(item);if (data.code === 200) { const videoUrl = data.data.url;});i++) { const movie = this.searchResults[source][i];overflow-y: auto;div.style.cursor = 'pointer';if (data.code === 200) { const movies = data.data.slice(0, 10);</span> <h2>历史观看</h2> <div id="historyContent">暂无历史记录</div> </div> </div> <script> class ShortFilmSearch { constructor() { this.currentPage = 1;} displayFavorites() { const favoritesContent = document.getElementById('favoritesContent');} } catch (error) { console.error('解析JSON数据错误:', error);if (!keyword) return;height: 100vh;if (!favoritesContent) return;const nextIndex = (this.currentEpisodeIndex + 1) % this.episodes.length;this.videoPlayer.load();grid-template-columns: repeat(3, 1fr);align-items: center;} else if (source === 'hema') { this.loadingHema = false;color: #333;this.currentEpisodeIndex = 0;box-shadow: 0 0 100px rgba(0, 0, 0, 0.3);});border-radius: 10px;} favoritesContent.innerHTML = '';} .error { text-align: center;const data = await response.json();line-height: 1.6;} } catch (error) { if (this.recommendedMovies) this.recommendedMovies.innerHTML = '<div class="error">推荐内容加载失败</div>';max-width: 500px;if (this.searchCount) this.searchCount.textContent = `共 ${total} 条结果`;if (this.searchInput) this.searchInput.addEventListener('keypress', (e) => { if (e.key === 'Enter') this.handleSearch();</script> </body> </html> <style> #updateModal { display: none;const data = await response.json();} else { if (this.recommendedMovies) this.recommendedMovies.innerHTML = '<div class="error">推荐内容加载失败</div>';padding-bottom: 10px;padding: 20px;});border-radius: 10px;this.hemaGrid.innerHTML = '<div class="loading">加载中...</div>';gap: 20px;tab.classList.add('active');padding: 8px 15px;font-size: 24px;} .video-player { height: 300px;} else if (activeSource === 'hema' && this.hasMoreHema && !this.loadingHema) { this.loadMoreResults('hema');position: absolute;} } </style> </head> <body> <!-- 头部 --> <div class="header"> <img class="logo" id="logo" src="1.png" alt="Logo"> <div class="search-container"> <input type="text" class="search-input" id="searchInput" placeholder="搜索短剧名称..."> </div> <div class="header-icons"> <div class="header-icon" id="historyIcon">🕒</div> <div class="header-icon" id="downloadIcon">⭐️</div> </div> </div> <!-- 主内容区 --> <div class="container" id="mainContent"> <!-- 轮播图 --> <div class="carousel" id="carousel"> <img src="IMG_20251004_152412.jpg" alt="轮播图"> </div> <!-- 推荐内容 --> <div class="section"> <div class="section-title">推荐</div> <div class="movies-grid" id="recommendedMovies"> <div class="loading">加载中...</div> </div> </div> </div> <!-- 搜索结果页面 --> <div class="container search-results-page" id="searchResultsPage"> <div class="search-results-header"> <h2>搜索结果</h2> <div class="search-results-count" id="searchCount">共 0 条结果</div> </div> <!-- 搜索结果标签页 --> <div class="search-source-tabs"> <div class="search-source-tab active" data-source="hongguo">红果</div> <div class="search-source-tab" data-source="hema">河马</div> </div> <div class="search-results-content" id="searchResultsContent"> <!-- 红果 --> <div class="source-section active" id="sourceSectionHongguo"> <div class="source-header"> <div class="source-name">红果</div> <div class="source-count" id="hongguoCount">共 0 部</div> </div> <div class="source-movies-grid" id="hongguoGrid"> <div class="loading">加载中...</div> </div> </div> <!-- 河马 --> <div class="source-section" id="sourceSectionHema"> <div class="source-header"> <div class="source-name">河马</div> <div class="source-count" id="hemaCount">共 0 部</div> </div> <div class="source-movies-grid" id="hemaGrid"> <div class="loading">加载中...</div> </div> </div> </div> </div> <!-- 视频播放页面 --> <div class="container video-page" id="videoPage"> <div class="video-player-container"> <video class="video-player" id="videoPlayer" controls preload="metadata"> 您的浏览器不支持视频播放 </video> </div> <div class="video-info"> <h1 class="video-title" id="videoTitle">视频标题</h1> <div class="video-meta" id="videoMeta">点击量 0 | 2025 爱情,动画,奇幻,冒险</div> </div> <div class="episodes-list"> <div class="episodes-header"> <div class="episodes-title">选集</div> <div class="episodes-more" id="episodeCount">更新至1集 ></div> </div> <div class="episodes-scroll" id="episodesScroll"> <!-- 剧集列表会动态插入到这里 --> </div> </div> </div> <!-- 关于我弹窗 --> <div class="modal" id="aboutModal"> <div class="modal-content"> <span class="modal-close" id="closeAboutModal">&times;</span> <h2>收藏列表</h2> <div id="favoritesContent">暂无收藏内容</div> </div> </div> <!-- 历史观看弹窗 --> <div class="modal" id="historyModal"> <div class="modal-content"> <span class="modal-close" id="closeHistoryModal">&times;} } handleScroll() { if (this.searchResultsPage.style.display !== 'block') return;height: 200px;break;if (this.searchResults[source].length > 0 && grid.innerHTML.includes('加载中')) { grid.innerHTML = '';} else { if (source === 'hongguo') this.hasMoreHongguo = false;} } catch (error) { alert('播放失败: ' + error.message);margin-bottom: 5px;overflow: hidden;color: white;} .source-section { background: white;} });} .favorite-icon { position: absolute;if (source === 'hema') this.hasMoreHema = false;this.sourceSectionHema = document.getElementById('sourceSectionHema');} } };height: 100%;z-index: -1;} .search-source-tab { padding: 8px 16px;} else if (source === 'hema') { this.sourceSectionHema.classList.add('active');} .source-name { font-size: 1.1rem;} if (num >= 10000) { return (num / 10000).toFixed(1) + '万';object-fit: contain;} } } getActiveSource() { return this.currentSource;this.hemaCount = document.getElementById('hemaCount');case 'history': this.displayHistory();} .header-icons { display: flex;if (this.videoPlayer) { this.videoPlayer.src = videoUrl;favoriteIcon.addEventListener('click', (e) => { e.stopPropagation();});const scrollTop = window.pageYOffset || document.documentElement.scrollTop;} .video-player { width: 100%;} .episode-item.active { background: #ff6b6b;grid-template-columns: 1fr;} else { btn.classList.remove('active');border-bottom: 1px solid #eee;const nextEpisode = this.episodes[nextIndex];div.textContent = text;if (scrollTop + windowHeight >= documentHeight - 100) { const activeSource = this.currentSource;if (this.searchResultsPage) this.searchResultsPage.style.display = 'none';if (this.videoPage) this.videoPage.style.display = 'block';const nextPage = Math.floor(this.searchResults[source].length / 10) + 1;border-radius: 8px;const response = await fetch(`https: const data = await response.json();favoriteIcon.classList.toggle('favorited');padding: 20px;} } playNextEpisode() { if (this.episodes.length === 0) return;return;display: -webkit-box;} async handleSearch() { const keyword = this.searchInput?.value.trim();xhr.onreadystatechange = function () { if (xhr.readyState === 4) { if (xhr.status === 200) { try { const response = JSON.parse(xhr.responseText);} #closeButton::before, #closeButton::after { content: '';font-weight: bold;padding: 10px 20px;cursor: pointer;left: 0;transition: transform 0.2s ease;background-color: #007BFF;} const closeButton = document.getElementById('closeButton');} else { alert('播放失败: ' + (data.msg || '未知错误'));if (newResults.length === 0) { if (source === 'hongguo') this.hasMoreHongguo = false;if (movies.length === 0) { container.innerHTML = '<div class="error">暂无内容</div>';position: absolute;card.className = 'movie-card';} .search-source-tab.active { color: #ff6b6b;} .movie-info { padding: 10px;width: 100vw;border-radius: 8px;card.addEventListener('click', () => { if (isSearchResult) { this.selectMovie(movie);border-radius: 8px;font-size: 1.1rem;background-color: transparent;} .video-title { font-size: 1.3rem;gap: 15px;overflow: hidden;height: 3px;this.displayMoviesGrid(movies, this.recommendedMovies);position: relative;margin: 20px 0;this.playEpisode(nextEpisode.video_id, nextEpisode.title, nextIndex);margin: 20px 0;margin: 0 auto 20px;overflow: hidden;container.appendChild(card);} .movie-card:hover { transform: translateY(-2px);} .section { margin: 30px 0;window.scrollTo({ top: 0, behavior: 'smooth' });color: #333;padding: 20px;margin-right: 10px;const randomPage = Math.floor(Math.random() * 7) + 1;position: absolute;const dataValue = response.data;background-color: rgba(0, 0, 0, 0.4);background-color: white;grid-template-columns: repeat(3, 1fr);background-color: white;top: 10px;favoritesContent.appendChild(div)})();
